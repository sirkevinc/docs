!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("slate"),require("immutable"),require("react")):"function"==typeof define&&define.amd?define(["exports","slate","immutable","react"],t):t(e.SlateReact={},e.Slate,e.Immutable,e.React)}(this,function(e,t,n,r){"use strict";var o="default"in n?n.default:n;r=r&&r.hasOwnProperty("default")?r.default:r;var a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function i(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}var c=i,s=l;function u(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}"function"==typeof a.setTimeout&&(c=setTimeout),"function"==typeof a.clearTimeout&&(s=clearTimeout);var d,f=[],p=!1,v=-1;function h(){p&&d&&(p=!1,d.length?f=d.concat(f):v=-1,f.length&&m())}function m(){if(!p){var e=u(h);p=!0;for(var t=f.length;t;){for(d=f,f=[];++v<t;)d&&d[v].run();v=-1,t=f.length}d=null,p=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}y.prototype.run=function(){this.fun.apply(null,this.array)};function g(){}var b=g,w=g,k=g,C=g,E=g,O=g,T=g;var S=a.performance||{},x=S.now||S.mozNow||S.msNow||S.oNow||S.webkitNow||function(){return(new Date).getTime()};var D=new Date;var R={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new y(e,t)),1!==f.length||p||u(m)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:b,addListener:w,once:k,off:C,removeListener:E,removeAllListeners:O,emit:T,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*x.call(S),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-D)/1e3}},N="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function F(e,t){return e(t={exports:{}},t.exports),t.exports}var A=1e3,I=60*A,_=60*I,B=24*_,P=365.25*B,j=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*P;case"days":case"day":case"d":return n*B;case"hours":case"hour":case"hrs":case"hr":case"h":return n*_;case"minutes":case"minute":case"mins":case"min":case"m":return n*I;case"seconds":case"second":case"secs":case"sec":case"s":return n*A;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?M(n=e,B,"day")||M(n,_,"hour")||M(n,I,"minute")||M(n,A,"second")||n+" ms":function(e){if(e>=B)return Math.round(e/B)+"d";if(e>=_)return Math.round(e/_)+"h";if(e>=I)return Math.round(e/I)+"m";if(e>=A)return Math.round(e/A)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function M(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var L=F(function(e,t){function n(e){var n;function o(){if(o.enabled){var e=o,r=+new Date,a=r-(n||r);e.diff=a,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),l=0;l<i.length;l++)i[l]=arguments[l];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var a=i[c];n=o.call(e,a),i.splice(c,1),c--}return n}),t.formatArgs.call(e,i),(o.log||t.log||console.log.bind(console)).apply(e,i)}}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),o.destroy=r,"function"==typeof t.init&&t.init(o),t.instances.push(o),o}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=j,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),q=(L.coerce,L.disable,L.enable,L.enabled,L.humanize,L.instances,L.names,L.skips,L.formatters,F(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==R&&"env"in R&&(e=R.env.DEBUG),e}(t=e.exports=L).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}));q.log,q.formatArgs,q.save,q.load,q.useColors,q.storage,q.colors;function V(e,t){function n(n,r,o,a,i){var l=r[o];return null!=l||n?null==l&&n?new Error("The "+i+" `"+o+"` is marked as required in `"+a+"`, but it was not supplied."):t(l)?null:new Error("Invalid "+i+" `"+o+"` supplied to `"+a+"`, expected a Slate `"+e+"` but received: "+l):null}function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!1].concat(t))}return r.isRequired=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!0].concat(t))},r}var W={block:V("Block",function(e){return t.Block.isBlock(e)}),blocks:V("List<Block>",function(e){return t.Block.isBlockList(e)}),change:V("Change",function(e){return t.Change.isChange(e)}),data:V("Data",function(e){return t.Data.isData(e)}),document:V("Document",function(e){return t.Document.isDocument(e)}),inline:V("Inline",function(e){return t.Inline.isInline(e)}),inlines:V("Inline",function(e){return t.Inline.isInlineList(e)}),leaf:V("Leaf",function(e){return t.Leaf.isLeaf(e)}),leaves:V("List<Leaf>",function(e){return t.Leaf.isLeafList(e)}),mark:V("Mark",function(e){return t.Mark.isMark(e)}),marks:V("Set<Mark>",function(e){return t.Mark.isMarkSet(e)}),node:V("Node",function(e){return t.Node.isNode(e)}),nodes:V("List<Node>",function(e){return t.Node.isNodeList(e)}),range:V("Range",function(e){return t.Range.isRange(e)}),ranges:V("List<Range>",function(e){return t.Range.isRangeList(e)}),selection:V("Selection",function(e){return t.Selection.isSelection(e)}),value:V("Value",function(e){return t.Value.isValue(e)}),text:V("Text",function(e){return t.Text.isText(e)}),texts:V("List<Text>",function(e){return t.Text.isTextList(e)})};function K(e){return function(){return e}}var U=function(){};U.thatReturns=K,U.thatReturnsFalse=K(!1),U.thatReturnsTrue=K(!0),U.thatReturnsNull=K(null),U.thatReturnsThis=function(){return this},U.thatReturnsArgument=function(e){return e};var z=U;var H=function(e,t,n,r,o,a,i,l){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,a,i,l],u=0;(c=new Error(t.replace(/%s/g,function(){return s[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},J=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var G="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",X=F(function(e){e.exports=function(){function e(e,t,n,r,o,a){a!==G&&H(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=z,n.PropTypes=n,n}()}),Z=function(e,t){if(!e)throw new Error("Invariant failed")},Q=function(e,t){return e===t};var ee=function(e,t){0},te=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onPaste","onSelect"],ne=function e(t){if(oe(t))return t;if(oe(t.ownerDocument))return t.ownerDocument;if(oe(t.document))return t.document;if(t.parentNode)return e(t.parentNode);if(t.commonAncestorContainer)return e(t.commonAncestorContainer);if(t.startContainer)return e(t.startContainer);if(t.anchorNode)return e(t.anchorNode)},re=9;function oe(e){return e&&e.nodeType===re}var ae=!1,ie=function(e){if(t=e,t&&t.window===t)return e;var t;var n=ne(e);if(ae){n.parentWindow.execScript("document._parentWindow = window;","Javascript");var r=n._parentWindow;return n._parentWindow=null,r}return n.defaultView||n.parentWindow};var le=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},ce="object"==typeof N&&N&&N.Object===Object&&N,se="object"==typeof self&&self&&self.Object===Object&&self,ue=ce||se||Function("return this")(),de=function(){return ue.Date.now()},fe=ue.Symbol,pe=Object.prototype,ve=pe.hasOwnProperty,he=pe.toString,me=fe?fe.toStringTag:void 0;var ye=function(e){var t=ve.call(e,me),n=e[me];try{e[me]=void 0;var r=!0}catch(e){}var o=he.call(e);return r&&(t?e[me]=n:delete e[me]),o},ge=Object.prototype.toString;var be=function(e){return ge.call(e)},we="[object Null]",ke="[object Undefined]",Ce=fe?fe.toStringTag:void 0;var Ee=function(e){return null==e?void 0===e?ke:we:Ce&&Ce in Object(e)?ye(e):be(e)};var Oe=function(e){return null!=e&&"object"==typeof e},Te="[object Symbol]";var Se=function(e){return"symbol"==typeof e||Oe(e)&&Ee(e)==Te},xe=NaN,De=/^\s+|\s+$/g,Re=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Fe=/^0o[0-7]+$/i,Ae=parseInt;var Ie=function(e){if("number"==typeof e)return e;if(Se(e))return xe;if(le(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=le(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(De,"");var n=Ne.test(e);return n||Fe.test(e)?Ae(e.slice(2),n?2:8):Re.test(e)?xe:+e},_e="Expected a function",Be=Math.max,Pe=Math.min;var je=function(e,t,n){var r,o,a,i,l,c,s=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(_e);function p(t){var n=r,a=o;return r=o=void 0,s=t,i=e.apply(a,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-s>=a}function h(){var e=de();if(v(e))return m(e);l=setTimeout(h,function(e){var n=t-(e-c);return d?Pe(n,a-(e-s)):n}(e))}function m(e){return l=void 0,f&&r?p(e):(r=o=void 0,i)}function y(){var e=de(),n=v(e);if(r=arguments,o=this,c=e,n){if(void 0===l)return function(e){return s=e,l=setTimeout(h,t),u?p(e):i}(c);if(d)return l=setTimeout(h,t),p(c)}return void 0===l&&(l=setTimeout(h,t)),i}return t=Ie(t)||0,le(n)&&(u=!!n.leading,a=(d="maxWait"in n)?Be(Ie(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==l&&clearTimeout(l),s=0,r=c=o=l=void 0},y.flush=function(){return void 0===l?i:m(de())},y},Me="Expected a function";var Le=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(Me);return le(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),je(e,t,{leading:r,maxWait:t,trailing:o})},qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve="object"===("undefined"==typeof window?"undefined":qe(window))&&"object"===("undefined"==typeof document?"undefined":qe(document))&&9===document.nodeType,We=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ke=void 0;if(Ve){var Ue=!0,ze=!1,He=void 0;try{for(var Je,Ye=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(Ue=(Je=Ye.next()).done);Ue=!0){var $e=Je.value,Ge=We($e,2),Xe=Ge[0];if(Ge[1].test(window.navigator.userAgent)){Ke=Xe;break}}}catch(e){ze=!0,He=e}finally{try{!Ue&&Ye.return&&Ye.return()}finally{if(ze)throw He}}}var Ze=void 0;if(Ve){var Qe=!0,et=!1,tt=void 0;try{for(var nt,rt=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(Qe=(nt=rt.next()).done);Qe=!0){var ot=nt.value,at=We(ot,2),it=at[0];if(at[1].test(window.navigator.userAgent)){Ze=it;break}}}catch(e){et=!0,tt=e}finally{try{!Qe&&rt.return&&rt.return()}finally{if(et)throw tt}}}var lt=[];if(Ve){var ct=!0,st=!1,ut=void 0;try{for(var dt,ft=[["inputeventslevel1",function(e){return"inputType"in(e.InputEvent?new e.InputEvent("input"):{})}],["inputeventslevel2",function(e){var t=e.document.createElement("div");return t.contentEditable=!0,"onbeforeinput"in t}]][Symbol.iterator]();!(ct=(dt=ft.next()).done);ct=!0){var pt=dt.value,vt=We(pt,2),ht=vt[0];(0,vt[1])(window)&&lt.push(ht)}}catch(e){st=!0,ut=e}finally{try{!ct&&ft.return&&ft.return()}finally{if(st)throw ut}}}var mt=[[/^9([.]0|)/,28],[/^8[.]1/,27],[/^8([.]0|)/,26],[/^7[.]1/,25],[/^7([.]0|)/,24],[/^6([.]0|)/,23],[/^5[.]1/,22],[/^5([.]0|)/,21],[/^4[.]4/,20]];var yt="firefox"===Ke,gt="safari"===Ke,bt="ie"===Ke,wt="edge"===Ke,kt="android"===Ze,Ct="ios"===Ze,Et="macos"===Ze,Ot=function(){if("android"!==Ze)return null;var e=window.navigator.userAgent.match(/Android\s([0-9\.]+)/);if(null==e)return null;var t=e[1],n=!0,r=!1,o=void 0;try{for(var a,i=mt[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,c=We(l,2),s=c[0],u=c[1];if(t.match(s))return u}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return null}(),Tt=(lt.includes("inputeventslevel1"),lt.includes("inputeventslevel2")||kt&&(28===Ot||null===Ot)),St={EDITOR:"data-slate-editor",FRAGMENT:"data-slate-fragment",KEY:"data-key",LEAF:"data-slate-leaf",LENGTH:"data-slate-length",OBJECT:"data-slate-object",OFFSET_KEY:"data-offset-key",SPACER:"data-slate-spacer",STRING:"data-slate-string",TEXT:"data-slate-object",VOID:"data-slate-void",ZERO_WIDTH:"data-slate-zero-width"},xt={BLOCK:"["+St.OBJECT+'="block"]',EDITOR:"["+St.EDITOR+"]",INLINE:"["+St.OBJECT+'="inline"]',KEY:"["+St.KEY+"]",LEAF:"["+St.LEAF+"]",OBJECT:"["+St.OBJECT+"]",STRING:"["+St.STRING+"]",TEXT:"["+St.OBJECT+'="text"]',VOID:"["+St.VOID+"]",ZERO_WIDTH:"["+St.ZERO_WIDTH+"]"},Dt="<<anonymous>>";function Rt(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof o.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function Nt(e){function t(t,n,r,o,a,i){for(var l=arguments.length,c=Array(l>6?l-6:0),s=6;s<l;s++)c[s-6]=arguments[s];return i=i||r,o=o||Dt,null!=n[r]?e.apply(void 0,[n,r,o,a,i].concat(c)):t?new Error("Required "+a+" `"+i+"` was not specified in `"+o+"`."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function Ft(e,t){return Nt(function(n,r,o,a,i){var l=n[r];if(!t(l)){var c=Rt(l);return new Error("Invalid "+a+" `"+i+"` of type `"+c+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function At(e,t,n){return Nt(function(r,o,a,i,l){for(var c=arguments.length,s=Array(c>5?c-5:0),u=5;u<c;u++)s[u-5]=arguments[u];var d=r[o];if(!n(d)){var f=i,p=Rt(d);return new Error("Invalid "+f+" `"+l+"` of type `"+p+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+l+"`, expected a function.");for(var v=d.toArray(),h=0,m=v.length;h<m;h++){var y=e.apply(void 0,[v,h,a,i,l+"["+h+"]"].concat(s));if(y instanceof Error)return y}})}function It(e,t,n,r){return Nt(function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return At(e,n,r).apply(void 0,a)||t&&(l=t,Nt(function(e,t,n,r,o){for(var a=arguments.length,i=Array(a>5?a-5:0),c=5;c<a;c++)i[c-5]=arguments[c];var s=e[t];if("function"!=typeof l)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+o+"`, expected a function.");for(var u=s.keySeq().toArray(),d=0,f=u.length;d<f;d++){var p=l.apply(void 0,[u,d,n,r,o+" -> key("+u[d]+")"].concat(i));if(p instanceof Error)return p}})).apply(void 0,a);var l})}function _t(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?o.Iterable.isIterable:arguments[2];return Nt(function(r,o,a,i,l){for(var c=arguments.length,s=Array(c>5?c-5:0),u=5;u<c;u++)s[u-5]=arguments[u];var d=r[o];if(!n(d)){var f=Rt(d);return new Error("Invalid "+i+" `"+l+"` of type `"+f+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var p=d.toObject();for(var v in e){var h=e[v];if(h){var m=h.apply(void 0,[p,v,a,i,l+"."+v].concat(s));if(m)return m}}})}function Bt(e){return _t(e)}var Pt={listOf:function(e){return At(e,"List",o.List.isList)},mapOf:function(e,t){return It(e,t,"Map",o.Map.isMap)},orderedMapOf:function(e,t){return It(e,t,"OrderedMap",o.OrderedMap.isOrderedMap)},setOf:function(e){return At(e,"Set",o.Set.isSet)},orderedSetOf:function(e){return At(e,"OrderedSet",o.OrderedSet.isOrderedSet)},stackOf:function(e){return At(e,"Stack",o.Stack.isStack)},iterableOf:function(e){return At(e,"Iterable",o.Iterable.isIterable)},recordOf:function(e){return Nt(function(t,n,r,a,i){for(var l=arguments.length,c=Array(l>5?l-5:0),s=5;s<l;s++)c[s-5]=arguments[s];var u=t[n];if(!(u instanceof o.Record)){var d=Rt(u),f=a;return new Error("Invalid "+f+" `"+i+"` of type `"+d+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var p in e){var v=e[p];if(v){var h=u.toObject(),m=v.apply(void 0,[h,p,r,a,i+"."+p].concat(c));if(m)return m}}})},shape:Bt,contains:Bt,mapContains:function(e){return _t(e,"Map",o.Map.isMap)},list:Ft("List",o.List.isList),map:Ft("Map",o.Map.isMap),orderedMap:Ft("OrderedMap",o.OrderedMap.isOrderedMap),set:Ft("Set",o.Set.isSet),orderedSet:Ft("OrderedSet",o.OrderedSet.isOrderedSet),stack:Ft("Stack",o.Stack.isStack),seq:Ft("Seq",o.Seq.isSeq),record:Ft("Record",function(e){return e instanceof o.Record}),iterable:Ft("Iterable",o.Iterable.isIterable)},jt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lt=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Wt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Kt=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ut=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},zt=/^([\w-]+)(?::(\d+))?$/;var Ht={parse:function(e){var t=zt.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=Kt(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},Jt=function(e){var t=e.text,n=void 0===t?"":t,o=e.isTrailing,a=void 0!==o&&o;return r.createElement("span",Lt({},St.STRING,!0),n,a?"\n":null)},Yt=function(e){var t,n=e.length,o=void 0===n?0:n,a=e.isLineBreak,i=void 0!==a&&a;return r.createElement("span",(Lt(t={},St.ZERO_WIDTH,i?"n":"z"),Lt(t,St.LENGTH,o),t),"\ufeff",i?r.createElement("br",null):null)},$t=function(e){var t,n=e.marks,o=e.annotations,a=e.decorations,i=e.node,l=e.index,c=e.offset,s=e.text,u=e.editor,d=e.parent,f=e.block,p=e.leaves,v=Ht.stringify({key:i.key,index:l}),h=void 0;if(u.query("isVoid",d))h=r.createElement(Yt,{length:d.text.length});else if(""===s&&"block"===d.object&&""===d.text&&d.nodes.last()===i)h=r.createElement(Yt,{isLineBreak:!0});else if(""===s)h=r.createElement(Yt,null);else{var m=f.getLastText(),y=s.charAt(s.length-1),g=i===m,b=l===p.size-1;h=g&&b&&"\n"===y?r.createElement(Jt,{isTrailing:!0,text:s}):r.createElement(Jt,{text:s})}var w={editor:u,marks:n,annotations:o,decorations:a,node:i,offset:c,text:s},k=!0,C=!1,E=void 0;try{for(var O,T=n[Symbol.iterator]();!(k=(O=T.next()).done);k=!0){var S=O.value;(M=u.run("renderMark",qt({},w,{mark:S,children:h,attributes:Lt({},St.OBJECT,"mark")})))&&(h=M)}}catch(e){C=!0,E=e}finally{try{!k&&T.return&&T.return()}finally{if(C)throw E}}var x=!0,D=!1,R=void 0;try{for(var N,F=a[Symbol.iterator]();!(x=(N=F.next()).done);x=!0){var A=N.value;(M=u.run("renderDecoration",qt({},w,{decoration:A,children:h,attributes:Lt({},St.OBJECT,"decoration")})))&&(h=M)}}catch(e){D=!0,R=e}finally{try{!x&&F.return&&F.return()}finally{if(D)throw R}}var I=!0,_=!1,B=void 0;try{for(var P,j=o[Symbol.iterator]();!(I=(P=j.next()).done);I=!0){var M,L=P.value;(M=u.run("renderAnnotation",qt({},w,{annotation:L,children:h,attributes:Lt({},St.OBJECT,"annotation")})))&&(h=M)}}catch(e){_=!0,B=e}finally{try{!I&&j.return&&j.return()}finally{if(_)throw B}}var q=(Lt(t={},St.LEAF,!0),Lt(t,St.OFFSET_KEY,v),t);return r.createElement("span",q,h)};$t.propTypes={annotations:Pt.list.isRequired,block:W.block.isRequired,decorations:Pt.list.isRequired,editor:X.object.isRequired,index:X.number.isRequired,leaves:X.object.isRequired,marks:W.marks.isRequired,node:W.node.isRequired,offset:X.number.isRequired,parent:W.node.isRequired,text:X.string.isRequired};var Gt=r.memo($t,function(e,t){return t.block===e.block&&t.index===e.index&&t.marks===e.marks&&t.parent===e.parent&&t.text===e.text&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)}),Xt=r.forwardRef(function(e,t){var n,o=e.annotations,a=e.block,i=e.decorations,l=e.node,c=e.parent,s=e.editor,u=e.style,d=l.key,f=l.getLeaves(o,i),p=0;return r.createElement("span",qt({ref:t,style:u},(Lt(n={},St.OBJECT,l.object),Lt(n,St.KEY,d),n)),f.map(function(e,t){var n=e.text,o=p;return p+=n.length,r.createElement(Gt,{key:l.key+"-"+t,block:a,editor:s,index:t,annotations:e.annotations,decorations:e.decorations,marks:e.marks,node:l,offset:o,parent:c,leaves:f,text:n})}))});Xt.propTypes={annotations:Pt.map.isRequired,block:W.block,decorations:Pt.list.isRequired,editor:X.object.isRequired,node:W.node.isRequired,parent:W.node.isRequired,style:X.object};var Zt=r.memo(Xt,function(e,t){return t.node===e.node&&"block"===t.parent.object&&e.parent.nodes.last()===e.node&&t.parent.nodes.last()!==t.node&&t.annotations.equals(e.annotations)&&t.decorations.equals(e.decorations)}),Qt=q("slate:void"),en=function(e){function t(){var e,n,r;jt(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Wt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),tn.call(r),Wt(r,n)}return Vt(t,e),Mt(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,o=t.node,a=t.readOnly,i="block"===o.object?"div":"span",l=Lt({},St.SPACER,!0),c=r.createElement(i,qt({style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},l),this.renderText()),s=r.createElement(i,{contentEditable:!!a&&null},n);this.debug("render",{props:t});var u=(Lt(e={},St.VOID,!0),Lt(e,St.KEY,o.key),e);return r.createElement(i,qt({contentEditable:!(!a&&"block"!==o.object)&&null},u),a?null:c,s)}}]),t}(r.Component);en.propTypes={block:W.block,children:X.any.isRequired,editor:X.object.isRequired,node:W.node.isRequired,parent:W.node.isRequired,readOnly:X.bool.isRequired};var tn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";Qt.apply(void 0,[t,""+i].concat(r))},this.renderText=function(){var t=e.props,n=t.annotations,o=t.block,a=t.decorations,i=t.node,l=t.readOnly,c=t.editor,s=t.textRef,u=i.getFirstText();return r.createElement(Zt,{ref:s,annotations:n,block:"block"===i.object?i:o,decorations:a,editor:c,key:u.key,node:u,parent:i,readOnly:l})}},nn=q("slate:node"),rn=function(e){function t(){var e,n,r;jt(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=Wt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),on.call(r),Wt(r,n)}return Vt(t,e),Mt(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.run("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(ee(!1,'As of slate-react@0.22 the `shouldNodeComponentUpdate` middleware is deprecated. You can pass specific values down the tree using React\'s built-in "context" construct instead.'),n)return!0;ee(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!==o.readOnly||(r.node!==o.node||(!!(!r.selection&&o.selection||r.selection&&!o.selection||r.selection&&o.selection&&!r.selection.equals(o.selection))||(!r.annotations.equals(o.annotations)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e,n=this;this.debug("render",this);var o=this.props,a=o.annotations,i=o.block,l=o.decorations,c=o.editor,s=o.node,u=o.parent,d=o.readOnly,f=o.selection,p=s.getDecorations(c),v=s.nodes.toArray().map(function(e,o){var u="text"===e.object?Zt:t,v=f&&an(s,o,f),h=p.map(function(e){return an(s,o,e)}).filter(function(e){return e}).concat(l),m=a.map(function(e){return an(s,o,e)}).filter(function(e){return e});return r.createElement(u,{block:"block"===s.object?s:i,editor:c,annotations:m,decorations:h,selection:v,key:e.key,node:e,parent:s,readOnly:d,ref:function(e){e?n.tmp.nodeRefs[o]=e:delete n.tmp.nodeRefs[o]}})}),h=(Lt(e={},St.OBJECT,s.object),Lt(e,St.KEY,s.key),Lt(e,"ref",this.ref),e);s.isLeafBlock()&&("rtl"===s.getTextDirection()&&(h.dir="rtl"));var m=void 0;"block"===s.object?m="renderBlock":"document"===s.object?m="renderDocument":"inline"===s.object&&(m="renderInline");var y=c.run(m,{attributes:h,children:v,editor:c,isFocused:!!f&&f.isFocused,isSelected:!!f,node:s,parent:u,readOnly:d});return c.isVoid(s)?r.createElement(en,qt({},this.props,{textRef:function(e){e?n.tmp.nodeRefs[0]=e:delete n.tmp.nodeRefs[0]}}),y):y}}]),t}(r.Component);rn.propTypes={annotations:Pt.map.isRequired,block:W.block,decorations:Pt.list.isRequired,editor:X.object.isRequired,node:W.node.isRequired,parent:W.node,readOnly:X.bool.isRequired,selection:W.selection};var on=function(){var e=this;this.tmp={nodeRefs:{}},this.ref=r.createRef(),this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,l=a.type;nn.apply(void 0,[t,i+" ("+l+")"].concat(r))}};function an(e,n,r){if(r.isUnset)return null;var o=e.nodes.get(n),a=r,i=a.start,l=a.end,c=i.path,s=l.path,u=c.first(),d=s.first();if(u===n)i=i.setPath(c.rest());else if(u<n&&n<=d)if("text"===o.object)i=i.moveTo(t.PathUtils.create([n]),0);else{var f=o.texts(),p=Kt(f,1)[0],v=Kt(p,2)[1];i=i.moveTo(v,0)}else i=null;if(d===n)l=l.setPath(s.rest());else if(u<=n&&n<d)if("text"===o.object)l=l.moveTo(t.PathUtils.create([n]),o.text.length);else{var h=o.texts({direction:"backward"}),m=Kt(h,1)[0],y=Kt(m,2),g=y[0],b=y[1];l=l.moveTo(b,g.text.length)}else l=null;return i&&l?r=(r=r.setStart(i)).setEnd(l):null}var ln=function(e){var t=e.anchorNode,n=e.anchorOffset,r=e.focusNode,o=e.focusOffset,a=t.compareDocumentPosition(r);return!(4===a||0===a&&n<o)},cn=["auto","overlay","scroll"],sn=Ct&&!!window.navigator.userAgent.match(/os 11_/i);function un(e){if(!sn&&e.anchorNode){var t=ie(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(cn.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n===t.document.body||n===t.document.documentElement,o=ln(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();gt&&a.collapsed&&0===i.top&&0===i.height&&(0===a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0===(i=a.getBoundingClientRect()).top&&0===i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var l=void 0,c=void 0,s=void 0,u=void 0,d=0,f=0,p=0,v=0,h=0,m=0,y=0,g=0;if(r){l=t.innerWidth,c=t.innerHeight,s=t.pageYOffset,u=t.pageXOffset}else{var b=n.offsetWidth,w=n.offsetHeight,k=n.scrollTop,C=n.scrollLeft,E=t.getComputedStyle(n),O=E.borderTopWidth,T=E.borderBottomWidth,S=E.borderLeftWidth,x=E.borderRightWidth,D=E.paddingTop,R=E.paddingBottom,N=E.paddingLeft,F=E.paddingRight,A=n.getBoundingClientRect();l=b,c=w,d=A.top+parseInt(O,10),f=A.left+parseInt(S,10),p=parseInt(O,10)+parseInt(T,10),v=parseInt(S,10)+parseInt(x,10),h=parseInt(D,10),m=parseInt(R,10),y=parseInt(N,10),g=parseInt(F,10),s=k,u=C}var I=i.top+s-d,_=i.left+u-f,B=u,P=s;_<u?B=_-y:_+i.width+v>u+l&&(B=_+v+g-l),I<s?P=I-h:I+i.height+p>s+c&&(P=I+p+m+i.height-c),r?t.scrollTo(B,P):(n.scrollTop=P,n.scrollLeft=B)}}function dn(e){if(bt){var t=window.document.body.createTextRange();t.collapse(),t.select()}else e.removeAllRanges()}var fn=/Permission denied to access property "nodeType"/,pn=q("slate:content");pn.update=q("slate:update");var vn=function(e){function t(){var e,n,o;jt(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=o=Wt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.tmp={isUpdatingSelection:!1,nodeRef:r.createRef(),nodeRefs:{}},o.ref=r.createRef(),o.handlers=te.reduce(function(e,t){return e[t]=function(e){return o.onEvent(t,e)},e},{}),o.updateSelection=function(){var e=o.props.editor,t=e.value.selection,n=t.isBackward,r=ie(o.ref.current),a=r.getSelection(),i=r.document.activeElement;if(pn.enabled&&pn.update("updateSelection",{selection:t.toJSON()}),a){var l=a.rangeCount,c=a.anchorNode,s=!1;if(t.isBlurred&&i===o.ref.current&&(o.ref.current.blur(),s=!0),t.isUnset&&l&&o.isInEditor(c)&&(dn(a),s=!0),t.isFocused&&i!==o.ref.current&&(o.ref.current.focus({preventScroll:!0}),s=!0),t.isFocused&&t.isSet){var u=!!l&&a.getRangeAt(0),d=e.findDOMRange(t);if(!d)return void ee(!1,"Unable to find a native DOM range from the current selection.");var f=d.startContainer,p=d.startOffset,v=d.endContainer,h=d.endOffset;if(u&&(f===u.startContainer&&p===u.startOffset&&v===u.endContainer&&h===u.endOffset||f===u.endContainer&&p===u.endOffset&&v===u.startContainer&&h===u.startOffset))return;s=!0,o.tmp.isUpdatingSelection=!0,dn(a),a.setBaseAndExtent?n?a.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):a.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset):a.addRange(d),un(a),setTimeout(function(){yt&&o.ref.current&&o.ref.current.focus(),o.tmp.isUpdatingSelection=!1})}s&&pn.enabled&&(pn("updateSelection",{selection:t,native:a,activeElement:i}),pn.update("updateSelection-applied",{selection:t}))}},o.isInEditor=function(e){var t=void 0;try{if(8===e.nodeType)return!1;t=3===e.nodeType?e.parentNode:e}catch(e){if(yt&&fn.test(e.message))return!1;throw e}return t.isContentEditable&&(t===o.ref.current||t.closest(xt.EDITOR)===o.ref.current)},o.onNativeSelectionChange=Le(function(e){o.props.readOnly||ie(e.target).document.activeElement===o.ref.current&&o.props.onEvent("onSelect",e)},100),Wt(o,n)}return Vt(t,e),Mt(t,[{key:"componentDidCatch",value:function(e,t){pn("componentDidCatch",{error:e,info:t}),this.setState({})}},{key:"componentDidMount",value:function(){ie(this.ref.current).document.addEventListener("selectionchange",this.onNativeSelectionChange),Tt&&this.ref.current.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection()}},{key:"componentWillUnmount",value:function(){var e=ie(this.ref.current);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),Tt&&this.ref.current.removeEventListener("beforeinput",this.handlers.onBeforeInput)}},{key:"componentDidUpdate",value:function(){pn.update("componentDidUpdate"),this.updateSelection()}},{key:"onEvent",value:function(e,t){if(pn("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!==e&&"onBlur"!==e&&"onFocus"!==e){if(!kt&&"onSelect"===e){var n=this.props.editor,r=n.value.selection,o=ie(t.target).getSelection(),a=n.findRange(o);if(a&&a.equals(r.toRange()))return void this.updateSelection()}if("onDragEnd"===e||"onDragEnter"===e||"onDragExit"===e||"onDragLeave"===e||"onDragOver"===e||"onDragStart"===e||"onDrop"===e)if(t.target.closest(xt.EDITOR)!==this.ref.current)return;("onBeforeInput"!==e&&"onBlur"!==e&&"onCompositionEnd"!==e&&"onCompositionStart"!==e&&"onCopy"!==e&&"onCut"!==e&&"onFocus"!==e&&"onInput"!==e&&"onKeyDown"!==e&&"onKeyUp"!==e&&"onPaste"!==e&&"onSelect"!==e||this.isInEditor(t.target))&&this.props.onEvent(e,t)}}},{key:"render",value:function(){var e,t=this.props,o=this.handlers,a=t.id,i=t.className,l=t.readOnly,c=t.editor,s=t.tabIndex,u=t.role,d=t.tagName,f=t.spellCheck,p=c.value,v=d,h=p.document,m=p.selection,y=qt({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},l?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style);pn("render",{props:t});var g=(Lt(e={},St.EDITOR,!0),Lt(e,St.KEY,h.key),e);return r.createElement(v,qt({key:this.props.contentKey},o,g,{ref:this.ref,contentEditable:!l||null,suppressContentEditableWarning:!0,id:a,className:i,autoCorrect:t.autoCorrect?"on":"off",spellCheck:f,style:y,role:l?null:u||"textbox",tabIndex:s,"data-gramm":!1}),r.createElement(rn,{annotations:p.annotations,block:null,decorations:n.List(),editor:c,node:h,parent:null,readOnly:l,selection:m,ref:this.tmp.nodeRef}))}}]),t}(r.Component);vn.propTypes={autoCorrect:X.bool.isRequired,className:X.string,contentKey:X.number,editor:X.object.isRequired,id:X.string,readOnly:X.bool.isRequired,role:X.string,spellCheck:X.bool.isRequired,style:X.object,tabIndex:X.number,tagName:X.string},vn.defaultProps={style:{},tagName:"div"};var hn=function(e,t){if(!e)throw new Error("Invariant failed: "+(t||""))},mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),gn=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},bn=0;var wn=[].concat(Ut(te),["commands","decorateNode","queries","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark","schema"]);function kn(){return{queries:{findDOMNode:function(e,n){n=t.PathUtils.create(n);var r=e.tmp.contentRef.current;return r?n.size?function e(t,n){if(!t)return null;if(!n.size)return t.ref?t.ref.current||null:t||null;var r=n.first(),o=n.rest();return e(t.tmp.nodeRefs[r],o)}(r.tmp.nodeRef.current,n):r.ref.current||null:null},findDOMPoint:function(e,t){var n=e.findDOMNode(t.path),r=0;if(!n)return null;var o=Array.from(n.querySelectorAll(xt.STRING+", "+xt.ZERO_WIDTH)),a=!0,i=!1,l=void 0;try{for(var c,s=o[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,d=u.childNodes[0],f=d.textContent.length,p=f;u.hasAttribute(St.LENGTH)&&(p=parseInt(u.getAttribute(St.LENGTH),10));var v=r+p;if(t.offset<=v)return{node:d,offset:Math.min(f,Math.max(0,t.offset-r))};r=v}}catch(e){i=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw l}}return null},findDOMRange:function(e,t){var n=t.anchor,r=t.focus,o=t.isBackward,a=t.isCollapsed,i=e.findDOMPoint(n),l=a?i:e.findDOMPoint(r);if(!i||!l)return null;var c=ie(i.node).document.createRange(),s=o?l:i,u=o?i:l;return c.setStart(s.node,s.offset),c.setEnd(u.node,u.offset),c},findEventRange:function(e,t){t.nativeEvent&&(t=t.nativeEvent);var n=t,r=n.clientX,o=n.clientY,a=n.target;if(null==r||null==o)return null;var i=e.value.document,l=e.findPath(t.target);if(!l)return null;var c=i.getNode(l);if(e.isVoid(c)){var s=a.getBoundingClientRect(),u="inline"===c.object?r-s.left<s.left+s.width-r:o-s.top<s.top+s.height-o,d=i.createRange(),f=u?"moveToEndOfNode":"moveToStartOfNode",p=i[u?"getPreviousText":"getNextText"](l);return p?d[f](p):null}var v=ie(a),h=void 0;if(v.document.caretRangeFromPoint)h=v.document.caretRangeFromPoint(r,o);else if(v.document.caretPositionFromPoint){var m=v.document.caretPositionFromPoint(r,o);(h=v.document.createRange()).setStart(m.offsetNode,m.offset),h.setEnd(m.offsetNode,m.offset)}else if(v.document.body.createTextRange){h=v.document.body.createTextRange();try{h.moveToPoint(r,o)}catch(e){return null}}return e.findRange(h)},findNode:function(e,t){var n=e.findPath(t);return n?e.value.document.getNode(n):null},findPath:function(e,n){var r=e.tmp.contentRef.current,o=n;if(o.hasAttribute(St.KEY)||(o=o.closest(xt.KEY)),!o||!o.getAttribute(St.KEY))return null;if(o===r.ref.current)return t.PathUtils.create([]);var a=function e(t,n){if(o===t)return n;if(!t.ref)return null;if(o===t.ref.current)return n;if(!t.tmp)return null;var r=t.tmp.nodeRefs,a=Object.keys(r),i=!0,l=!1,c=void 0;try{for(var s,u=a[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value,f=r[d],p=parseInt(d,10),v=e(f,[].concat(Ut(n),[p]));if(v)return v}}catch(e){l=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw c}}return null}(r.tmp.nodeRef.current,[]);return a?t.PathUtils.create(a):null},findPoint:function(e,t,n){var r=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=Cn(e,o,r);1===e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=Cn(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(t,n),o=r.node,a=r.offset,i=ie(t),l=o.parentNode,c=l.closest(xt.LEAF),s=void 0,u=void 0,d=void 0;if(c){s=c.closest(xt.TEXT);var f=i.document.createRange();f.setStart(s,0),f.setEnd(o,a);var p=f.cloneContents(),v=p.querySelectorAll(xt.ZERO_WIDTH);Array.from(v).forEach(function(e){e.parentNode.removeChild(e)}),u=p.textContent.length,d=s}else{var h=l.closest(xt.VOID);if(!h)return null;if(!(c=h.querySelector(xt.LEAF)))return null;s=c.closest(xt.TEXT),u=(d=c).textContent.length}u===d.textContent.length&&l.hasAttribute(St.ZERO_WIDTH)&&u--;var m=e.findPath(s);return m?e.value.document.createPoint({path:m,offset:u}):null},findRange:function(e,t){var n=t.anchorNode||t.startContainer;if(!n)return null;var r=ie(n);(t instanceof r.Range||r.StaticRange&&t instanceof r.StaticRange)&&(t={anchorNode:t.startContainer,anchorOffset:t.startOffset,focusNode:t.endContainer,focusOffset:t.endOffset});var o=t,a=o.anchorNode,i=o.anchorOffset,l=o.focusNode,c=o.focusOffset,s=o.isCollapsed,u=e.value,d=e.findPoint(a,i),f=s?d:e.findPoint(l,c);return d&&f?u.document.createRange({anchor:d,focus:f}):null},findSelection:function(e,n){var r=e.value,o=r.document;if(!n.rangeCount)return null;var a=e.findRange(n);if(!a)return null;var i=a,l=i.anchor,c=i.focus,s=o.getNode(l.path),u=o.getNode(c.path),d=o.getClosestInline(l.path),f=o.getClosestInline(c.path),p=o.getClosestBlock(c.path),v=o.getClosestBlock(l.path);if(v&&!e.isVoid(v)&&0===l.offset&&p&&e.isVoid(p)&&0!==c.offset&&(a=a.setFocus(c.setOffset(0))),d&&!e.isVoid(d)&&l.offset===s.text.length){var h=o.getClosestBlock(l.path),m=o.getDepth(h.key),y=t.PathUtils.drop(l.path,m),g=h.texts({path:y}),b=Kt(g,1)[0];if(b){var w=Kt(b,2)[1],k=l.path.slice(0,m).concat(w);a=a.moveAnchorTo(k,0)}}if(f&&!e.isVoid(f)&&c.offset===u.text.length){var C=o.getClosestBlock(c.path),E=o.getDepth(C.key),O=t.PathUtils.drop(c.path,E),T=C.texts({path:O}),S=Kt(T,1)[0];if(S){var x=Kt(S,2)[1],D=c.path.slice(0,E).concat(x);a=a.moveFocusTo(D,0)}}var R=o.createSelection(a);return R=(R=R.setIsFocused(!0)).set("marks",r.selection.marks)}}}}function Cn(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,l=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!l);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(l=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}var En=Array.isArray,On=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tn=/^\w*$/;var Sn=function(e,t){if(En(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Se(e))||Tn.test(e)||!On.test(e)||null!=t&&e in Object(t)},xn="[object AsyncFunction]",Dn="[object Function]",Rn="[object GeneratorFunction]",Nn="[object Proxy]";var Fn,An=function(e){if(!le(e))return!1;var t=Ee(e);return t==Dn||t==Rn||t==xn||t==Nn},In=ue["__core-js_shared__"],_n=(Fn=/[^.]+$/.exec(In&&In.keys&&In.keys.IE_PROTO||""))?"Symbol(src)_1."+Fn:"";var Bn=function(e){return!!_n&&_n in e},Pn=Function.prototype.toString;var jn=function(e){if(null!=e){try{return Pn.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Mn=/^\[object .+?Constructor\]$/,Ln=Function.prototype,qn=Object.prototype,Vn=Ln.toString,Wn=qn.hasOwnProperty,Kn=RegExp("^"+Vn.call(Wn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Un=function(e){return!(!le(e)||Bn(e))&&(An(e)?Kn:Mn).test(jn(e))};var zn=function(e,t){return null==e?void 0:e[t]};var Hn=function(e,t){var n=zn(e,t);return Un(n)?n:void 0},Jn=Hn(Object,"create");var Yn=function(){this.__data__=Jn?Jn(null):{},this.size=0};var $n=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn="__lodash_hash_undefined__",Xn=Object.prototype.hasOwnProperty;var Zn=function(e){var t=this.__data__;if(Jn){var n=t[e];return n===Gn?void 0:n}return Xn.call(t,e)?t[e]:void 0},Qn=Object.prototype.hasOwnProperty;var er=function(e){var t=this.__data__;return Jn?void 0!==t[e]:Qn.call(t,e)},tr="__lodash_hash_undefined__";var nr=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Jn&&void 0===t?tr:t,this};function rr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rr.prototype.clear=Yn,rr.prototype.delete=$n,rr.prototype.get=Zn,rr.prototype.has=er,rr.prototype.set=nr;var or=rr;var ar=function(){this.__data__=[],this.size=0};var ir=function(e,t){return e===t||e!=e&&t!=t};var lr=function(e,t){for(var n=e.length;n--;)if(ir(e[n][0],t))return n;return-1},cr=Array.prototype.splice;var sr=function(e){var t=this.__data__,n=lr(t,e);return!(n<0||(n==t.length-1?t.pop():cr.call(t,n,1),--this.size,0))};var ur=function(e){var t=this.__data__,n=lr(t,e);return n<0?void 0:t[n][1]};var dr=function(e){return lr(this.__data__,e)>-1};var fr=function(e,t){var n=this.__data__,r=lr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function pr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pr.prototype.clear=ar,pr.prototype.delete=sr,pr.prototype.get=ur,pr.prototype.has=dr,pr.prototype.set=fr;var vr=pr,hr=Hn(ue,"Map");var mr=function(){this.size=0,this.__data__={hash:new or,map:new(hr||vr),string:new or}};var yr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var gr=function(e,t){var n=e.__data__;return yr(t)?n["string"==typeof t?"string":"hash"]:n.map};var br=function(e){var t=gr(this,e).delete(e);return this.size-=t?1:0,t};var wr=function(e){return gr(this,e).get(e)};var kr=function(e){return gr(this,e).has(e)};var Cr=function(e,t){var n=gr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Er(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Er.prototype.clear=mr,Er.prototype.delete=br,Er.prototype.get=wr,Er.prototype.has=kr,Er.prototype.set=Cr;var Or=Er,Tr="Expected a function";function Sr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Tr);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=e.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(Sr.Cache||Or),n}Sr.Cache=Or;var xr=Sr,Dr=500;var Rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nr=/\\(\\)?/g,Fr=function(e){var t=xr(e,function(e){return n.size===Dr&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Rr,function(e,n,r,o){t.push(r?o.replace(Nr,"$1"):n||e)}),t});var Ar=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Ir=1/0,_r=fe?fe.prototype:void 0,Br=_r?_r.toString:void 0;var Pr=function e(t){if("string"==typeof t)return t;if(En(t))return Ar(t,e)+"";if(Se(t))return Br?Br.call(t):"";var n=t+"";return"0"==n&&1/t==-Ir?"-0":n};var jr=function(e){return null==e?"":Pr(e)};var Mr=function(e,t){return En(e)?e:Sn(e,t)?[e]:Fr(jr(e))},Lr=1/0;var qr=function(e){if("string"==typeof e||Se(e))return e;var t=e+"";return"0"==t&&1/e==-Lr?"-0":t};var Vr=function(e,t){for(var n=0,r=(t=Mr(t,e)).length;null!=e&&n<r;)e=e[qr(t[n++])];return n&&n==r?e:void 0},Wr=function(){try{var e=Hn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Kr=function(e,t,n){"__proto__"==t&&Wr?Wr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ur=Object.prototype.hasOwnProperty;var zr=function(e,t,n){var r=e[t];Ur.call(e,t)&&ir(r,n)&&(void 0!==n||t in e)||Kr(e,t,n)},Hr=9007199254740991,Jr=/^(?:0|[1-9]\d*)$/;var Yr=function(e,t){var n=typeof e;return!!(t=null==t?Hr:t)&&("number"==n||"symbol"!=n&&Jr.test(e))&&e>-1&&e%1==0&&e<t};var $r=function(e,t,n,r){if(!le(e))return e;for(var o=-1,a=(t=Mr(t,e)).length,i=a-1,l=e;null!=l&&++o<a;){var c=qr(t[o]),s=n;if(o!=i){var u=l[c];void 0===(s=r?r(u,c,l):void 0)&&(s=le(u)?u:Yr(t[o+1])?[]:{})}zr(l,c,s),l=l[c]}return e};var Gr=function(e,t,n){for(var r=-1,o=t.length,a={};++r<o;){var i=t[r],l=Vr(e,i);n(l,i)&&$r(a,Mr(i,e),l)}return a};var Xr=function(e,t){return null!=e&&t in Object(e)},Zr="[object Arguments]";var Qr=function(e){return Oe(e)&&Ee(e)==Zr},eo=Object.prototype,to=eo.hasOwnProperty,no=eo.propertyIsEnumerable,ro=Qr(function(){return arguments}())?Qr:function(e){return Oe(e)&&to.call(e,"callee")&&!no.call(e,"callee")},oo=9007199254740991;var ao=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=oo};var io=function(e,t,n){for(var r=-1,o=(t=Mr(t,e)).length,a=!1;++r<o;){var i=qr(t[r]);if(!(a=null!=e&&n(e,i)))break;e=e[i]}return a||++r!=o?a:!!(o=null==e?0:e.length)&&ao(o)&&Yr(i,o)&&(En(e)||ro(e))};var lo=function(e,t){return null!=e&&io(e,t,Xr)};var co=function(e,t){return Gr(e,t,function(t,n){return lo(e,n)})};var so=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},uo=fe?fe.isConcatSpreadable:void 0;var fo=function(e){return En(e)||ro(e)||!!(uo&&e&&e[uo])};var po=function e(t,n,r,o,a){var i=-1,l=t.length;for(r||(r=fo),a||(a=[]);++i<l;){var c=t[i];n>0&&r(c)?n>1?e(c,n-1,r,o,a):so(a,c):o||(a[a.length]=c)}return a};var vo=function(e){return null!=e&&e.length?po(e,1):[]};var ho=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},mo=Math.max;var yo=function(e,t,n){return t=mo(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=mo(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(i),ho(e,this,l)}};var go=function(e){return function(){return e}};var bo=Wr?function(e,t){return Wr(e,"toString",{configurable:!0,enumerable:!1,value:go(t),writable:!0})}:function(e){return e},wo=800,ko=16,Co=Date.now;var Eo=function(e){var t=0,n=0;return function(){var r=Co(),o=ko-(r-n);if(n=r,o>0){if(++t>=wo)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(bo);var Oo=function(e){return Eo(yo(e,void 0,vo),e+"")}(function(e,t){return null==e?{}:co(e,t)});function To(e,n,r){ee(!1,"As of slate-react@0.22 the `findPoint(node, offset)` helper is deprecated in favor of `editor.findPoint(node, offset)`."),Z(!t.Value.isValue(r),"As of Slate 0.42.0, the `findPoint` utility takes an `editor` instead of a `value`.");var o=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=So(e,o,r);1===e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=So(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,n),a=o.node,i=o.offset,l=ie(e),c=a.parentNode,s=c.closest(xt.LEAF),u=void 0,d=void 0;if(s){var f=l.document.createRange(),p=s.closest(xt.TEXT);f.setStart(p,0),f.setEnd(a,i),d=p,u=f.cloneContents().textContent.length}else{var v=c.closest(xt.VOID);if(!v)return null;if(!(s=v.querySelector(xt.LEAF)))return null;u=(d=s).textContent.length}u===d.textContent.length&&c.hasAttribute(St.ZERO_WIDTH)&&u--;var h=s.getAttribute(St.OFFSET_KEY);if(!h)return null;var m=Ht.parse(h).key,y=r.value;return y.document.hasDescendant(m)?y.document.createPoint({key:m,offset:u}):null}function So(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,l=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!l);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(l=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}function xo(e,n){ee(!1,"As of slate-react@0.22 the `findRange(selection)` helper is deprecated in favor of `editor.findRange(selection)`."),Z(!t.Value.isValue(n),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var r=e.anchorNode||e.startContainer;if(!r)return null;var o=ie(r);(e instanceof o.Range||o.StaticRange&&e instanceof o.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var a=e,i=a.anchorNode,l=a.anchorOffset,c=a.focusNode,s=a.focusOffset,u=a.isCollapsed,d=n.value,f=To(i,l,n),p=u?f:To(c,s,n);return f&&p?d.document.createRange({anchor:f,focus:p}):null}function Do(e,n,r){ee(!1,"As of slate-react@0.22 the `getSelectionFromDOM(window, editor, domSelection)` helper is deprecated in favor of `editor.findSelection(domSelection)`.");var o=n.value,a=o.document;if(r.rangeCount){var i=xo(r,n);if(i){var l=i,c=l.anchor,s=l.focus,u=a.getNode(c.path),d=a.getNode(s.path),f=a.getClosestInline(c.path),p=a.getClosestInline(s.path),v=a.getClosestBlock(s.path),h=a.getClosestBlock(c.path);if(h&&!n.isVoid(h)&&0===c.offset&&v&&n.isVoid(v)&&0!==s.offset&&(i=i.setFocus(s.setOffset(0))),f&&!n.isVoid(f)&&c.offset===u.text.length){var m=a.getClosestBlock(c.path),y=a.getDepth(m.key),g=t.PathUtils.drop(c.path,y),b=m.texts({path:g}),w=Kt(b,1)[0];if(w){var k=Kt(w,2)[1],C=c.path.slice(0,y).concat(k);i=i.moveAnchorTo(C,0)}}if(p&&!n.isVoid(p)&&s.offset===d.text.length){var E=a.getClosestBlock(s.path),O=a.getDepth(E.key),T=t.PathUtils.drop(s.path,O),S=E.texts({path:T}),x=Kt(S,1)[0];if(x){var D=Kt(x,2)[1],R=s.path.slice(0,O).concat(D);i=i.moveFocusTo(R,0)}}var N=a.createSelection(i);return N=(N=N.setIsFocused(!0)).set("marks",o.selection.marks)}}else n.blur()}function Ro(e,t){return e.nodeType===t.Node.TEXT_NODE}function No(e,t){if(!e.length)throw new Error("elements must be an Array");var n=e[e.length-1];return{elements:e.map(function(e){return function e(t,n){var r={};return r.node=t,Ro(t,n)&&(r.text=t.textContent),r.children=Array.from(t.childNodes).map(function(t){return e(t,n)}),r}(e,t)}),parent:n.parentElement,next:n.nextElementSibling}}function Fo(e,t){var n=e.elements,r=e.next,o=e.parent;n.forEach(function(e){return function e(t,n){var r=t.node;Ro(r,n)&&r.textContent!==t.text&&(r.textContent=t.text),t.children.forEach(function(t){e(t,n),r.appendChild(t.node)});for(var o=t.children.length;r.childNodes.length>o;)r.removeChild(r.childNodes[0]);var a=r.dataset;if(a){var i=a.key;if(i){var l=new n.Set(Array.from(n.document.querySelectorAll("["+St.KEY+'="'+i+'"]')));l.delete(r),l.forEach(function(e){return e.parentElement.removeChild(e)})}}}(e,t)});var a=n[n.length-1].node;e.next?o.insertBefore(a,r):o.appendChild(a);for(var i=a,l=n.length-2;l>=0;l--){var c=n[l].node;o.insertBefore(c,i),i=c}}var Ao=function(){function e(t,n){jt(this,e),this.window=ie(t[0]),this.snapshot=No(t,this.window),this.data=n}return Mt(e,[{key:"apply",value:function(){Fo(this.snapshot,this.window)}},{key:"getData",value:function(){return this.data}}]),e}();function Io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return e.nodeType===n.Node.TEXT_NODE&&(e=e.parentNode),e.closest(t)}var _o=function(){function e(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).before,o=void 0!==r&&r;jt(this,e);var a=t.getSelection(),i=Io(a.anchorNode,xt.EDITOR+" > *"),l=[i];if(o){var c=i.previousElementSibling;c&&l.unshift(c)}this.snapshot=new Ao(l),this.selection=n.findSelection(a)}return Mt(e,[{key:"apply",value:function(e){var t=this.snapshot,n=this.selection;t.apply(),e.moveTo(n.anchor.path,n.anchor.offset)}}]),e}();function Bo(){}var Po=function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt(this,e),this.__call__=function(){r.fn(),r.preventFurtherCalls()},this.preventFurtherCalls=function(){r.fn=Bo},this.resume=function(e){r.cancel(),e?(r.mode="timeout",r.timeoutId=r.window.setTimeout(r.__call__,e)):(r.mode="animationFrame",r.callbackId=r.window.requestAnimationFrame(r.__call__))},this.cancel=function(){"timeout"===r.mode?r.window.clearTimeout(r.timeoutId):r.window.cancelAnimationFrame(r.callbackId),r.onCancel&&r.onCancel()},this.__setTimeout__=function(e){null!=e&&r.window.setTimeout(function(){r.cancel(),r.preventFurtherCalls()},e)},this.fn=n,this.window=t,this.resume(),this.onCancel=o.onCancel,this.__setTimeout__(o.timeout)},jo=q("slate:android");jo.reconcile=q("slate:reconcile"),jo("ANDROID_API_VERSION",{ANDROID_API_VERSION:Ot});var Mo=0,Lo=1;function qo(){var e=Mo,t=new window.Set,n=null,r=null,o=null,a=null,i=!1,l=null;function c(e,n,r){var o=r.from;jo.reconcile({from:o});var a=e.getSelection(),i=n.findSelection(a);t.forEach(function(e){n.reconcileDOMNode(e)}),n.select(i),t.clear()}return{onBeforeInput:function(t,o,c){var s=!t.nativeEvent;jo("onBeforeInput",{isNative:s,event:t,status:e,e:Oo(t,["data","inputType","isComposing","nativeEvent"])});var u,d=ie(t.target);if(i)return t.preventDefault(),void(i=!1);switch(Ot){case 25:break;case 26:case 27:if(a&&(a.cancel(),r.resume()),s){if("insertParagraph"===t.inputType||"insertLineBreak"===t.inputType){jo("onBeforeInput:enter:native",{});var f=d.getSelection(),p=Do(0,o,f);i=!0,t.preventDefault(),o.moveTo(p.anchor.path,p.anchor.offset),o.splitBlock()}}else{if(function(e,t){if(!Array.isArray(t))throw new Error("chars must be an array of one character strings");if(null==e)return!1;var n=e[e.length-1];return t.includes(n)}(t.data,["."]))return jo("onBeforeInput:period"),r.cancel(),void(l="period");null!=(u=t.data)&&10===u[u.length-1].charCodeAt(0)&&(r&&r.cancel(),d.requestAnimationFrame(function(){jo("onBeforeInput:enter:react",{}),n.apply(o),o.splitBlock()}))}break;case 28:a&&(a.cancel(),r.resume());break;default:e!==Lo&&c()}},onCompositionEnd:function(o,a,i){jo("onCompositionEnd",{event:o});var s=ie(o.target),u=s.getSelection().anchorNode;switch(Ot){case 26:case 27:n=new _o(s,a),e=Lo}l="reconcile",t.add(u),r=new Po(s,function(){e=Mo,c(s,a,{from:"onCompositionEnd:reconciler"}),l=null})},onCompositionStart:function(n,r,o){jo("onCompositionStart",{event:n}),e=Lo,t.clear()},onCompositionUpdate:function(e,t,n){jo("onCompositionUpdate",{event:e})},onInput:function(n,i,s){switch(jo("onInput",{event:n,status:e,e:Oo(n,["data","nativeEvent","inputType","isComposing"])}),Ot){case 24:case 25:break;case 26:case 27:case 28:var u=n.nativeEvent;if(28===Ot&&"insertText"===u.inputType&&" "===u.data)return r&&r.cancel(),a&&a.cancel(),void c(window,i,{from:"onInput:space"});if((26===Ot||27===Ot)&&"period"===l){jo("onInput:period:abort");var d=window.getSelection().anchorNode;return void t.add(d)}if("deleteContentBackward"===u.inputType){jo("onInput:delete",{keyDownSnapshot:o});var f=ie(n.target);return r&&r.cancel(),a&&a.cancel(),void(a=new Po(f,function(){jo("onInput:delete:callback",{keyDownSnapshot:o}),o.apply(i),i.deleteBackward(),a=null},{onCancel:function(){a=null}}))}if(e===Lo){var p=window.getSelection().anchorNode;return void t.add(p)}if(28===Ot){jo("onInput:fallback");var v=window.getSelection().anchorNode;return t.add(v),void window.requestAnimationFrame(function(){jo("onInput:fallback:callback"),c(window,i,{from:"onInput:fallback"})})}break;default:if(e===Lo)return;s()}},onKeyDown:function(t,i,l){jo("onKeyDown",{event:t,status:e,e:Oo(t,["char","charCode","code","key","keyCode","keyIdentifier","keyLocation","location","nativeEvent","which"])});var s=ie(t.target);switch(Ot){case 25:"Enter"===t.key&&l();break;case 26:case 27:if("Enter"===t.key){if(jo("onKeyDown:enter",{}),a)a.cancel(),t.preventDefault(),s.requestAnimationFrame(function(){jo("onKeyDown:enter:callback"),n.apply(i),i.splitBlock()});else{t.preventDefault();var u=s.getSelection(),d=Do(0,i,u);i.moveTo(d.anchor.path,d.anchor.offset),i.splitBlock()}return}o=new _o(s,i,{before:!0});break;case 28:if("Enter"===t.key)return jo("onKeyDown:enter"),t.preventDefault(),r&&r.cancel(),a&&a.cancel(),void s.requestAnimationFrame(function(){c(s,i,{from:"onKeyDown:enter"}),i.splitBlock()});o=new _o(s,i,{before:!0}),jo("onKeyDown:snapshot",{keyDownSnapshot:o});break;default:e!==Lo&&l()}},onSelect:function(t,n,r){switch(jo("onSelect",{event:t,status:e}),Ot){case 26:case 27:case 28:!function(e){var t=e.getSelection(),n=t.anchorNode,r=n.parentElement.dataset;if(r&&"n"===r.slateZeroWidth&&1===n.textContent.length&&0!==t.anchorOffset){var o=e.document.createRange();o.setStart(n,0),o.setEnd(n,0),t.removeAllRanges(),t.addRange(o)}}(ie(t.target))}}}}var Vo=self.atob.bind(self),Wo=self.btoa.bind(self);function Ko(e){var t=JSON.stringify(e);return Wo(encodeURIComponent(t))}function Uo(e){var t=decodeURIComponent(Vo(e));return JSON.parse(t)}var zo,Ho={deserialize:function(e,n){var r=Uo(e);return t.Value.fromJSON(r,n)},deserializeNode:function(e,n){var r=Uo(e);return t.Node.fromJSON(r,n)},serialize:function(e,t){return Ko(e.toJSON(t))},serializeNode:function(e,t){return Ko(e.toJSON(t))}},Jo=F(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:"undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)o["f"+a]=111+a;function i(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return l(e,t)}),o=function(e){return r.some(function(t){return c(t,e)})};return null==n?o:o(n)}function l(e,t){var r=t&&t.byKey,o={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var l in n)o[n[l]]=!1;var c=!0,d=!1,f=void 0;try{for(var p,v=a[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var h=p.value,m=h.endsWith("?");m&&(h=h.slice(0,-1));var y=u(h),g=n[y];1!==i&&g||(r?o.key=y:o.which=s(h)),g&&(o[g]=!m||null)}}catch(e){d=!0,f=e}finally{try{!c&&v.return&&v.return()}finally{if(d)throw f}}return o}function c(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&((null!=(o="key"===n?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r))return!1}return!0}function s(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=r[e]||e}t.default=i,t.isHotkey=i,t.isCodeHotkey=function(e,t){return i(e,t)},t.isKeyHotkey=function(e,t){return i(e,{byKey:!0},t)},t.parseHotkey=l,t.compareHotkey=c,t.toKeyCode=s,t.toKeyName=u});(zo=Jo)&&zo.__esModule&&Object.prototype.hasOwnProperty.call(zo,"default")&&zo.default;Jo.isHotkey,Jo.isCodeHotkey;var Yo=Jo.isKeyHotkey,$o=(Jo.parseHotkey,Jo.compareHotkey,Jo.toKeyCode,Jo.toKeyName,{bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"}),Go={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Xo={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:"ctrl+y"},Zo={},Qo=Ct||Et,ea=!Qo;[].concat(Object.keys($o)).concat(Object.keys(Go)).concat(Object.keys(Xo)).forEach(function(e){var t="is"+e[0].toUpperCase()+e.slice(1);if(!Zo[t]){var n=$o[e],r=Go[e],o=Xo[e],a=n&&Yo(n),i=r&&Yo(r),l=o&&Yo(o);Zo[t]=function(e){return!(!a||!a(e))||(!!(Qo&&i&&i(e))||!!(ea&&l&&l(e)))}}});var ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function na(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delimiter,r=void 0===n?"\n":n;return"document"===e.object||"block"===e.object&&t.Block.isBlockList(e.nodes)?e.nodes.map(na).join(r):e.text}var ra={deserialize:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.defaultBlock,a=void 0===o?"line":o,i=r.defaultMarks,l=void 0===i?[]:i,c=r.delimiter,s=void 0===c?"\n":c,u=r.toJSON,d=void 0!==u&&u;n.Set.isSet(l)&&(l=l.toArray()),a=t.Node.createProperties(a),l=l.map(t.Mark.createProperties);var f={object:"value",document:{object:"document",data:{},nodes:e.split(s).map(function(e){return ta({},a,{object:"block",data:{},nodes:[{object:"text",text:e,marks:l}]})})}};return d?f:t.Value.fromJSON(f)},serialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return na(e.document,t)}},oa={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"};function aa(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;ee(!1,"As of slate-react@0.22 the `findDOMNode(key)` helper is deprecated in favor of `editor.findDOMNode(path)`."),t.Node.isNode(e)&&(e=e.key);var r=n.document.querySelector("["+St.KEY+'="'+e+'"]');if(!r)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return r}var ia=oa.FRAGMENT,la=oa.HTML,ca=oa.TEXT;function sa(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Z(!t.Value.isValue(n),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var o=ie(e.target),a=o.getSelection(),i=n.value,l=i.document,c=i.fragment,s=i.selection,u=s.start,d=s.end,f=l.getClosestVoid(u.path,n),p=l.getClosestVoid(d.path,n);if(!a.isCollapsed||f){var v=Ho.serializeNode(c),h=a.getRangeAt(0),m=h.cloneContents(),y=m.childNodes[0];if(m.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(y=e)}),p){var g=h.cloneRange(),b=aa(p,o);g.setEndAfter(b),m=g.cloneContents()}if(f&&(y=m.childNodes[0].childNodes[1].firstChild),[].slice.call(m.querySelectorAll(xt.ZERO_WIDTH)).forEach(function(e){var t="n"===e.getAttribute(St.ZERO_WIDTH);e.textContent=t?"\n":""}),3===y.nodeType){var w=o.document.createElement("span");w.style.whiteSpace="pre",w.appendChild(y),m.appendChild(w),y=w}y.setAttribute(St.FRAGMENT,v);var k=t.Value.create({document:c}),C=ra.serialize(k),E=o.document.createElement("div");if(E.appendChild(m),e.clipboardData&&e.clipboardData.setData&&!bt)return e.preventDefault(),e.clipboardData.setData(ca,C),e.clipboardData.setData(ia,v),e.clipboardData.setData(la,E.innerHTML),void r();var O=e.target.closest(xt.EDITOR);E.setAttribute("contenteditable",!0),E.style.position="absolute",E.style.left="-9999px",O.appendChild(E),a.selectAllChildren(E),o.requestAnimationFrame(function(){O.removeChild(E),dn(a),a.addRange(h),r()})}}var ua=oa.FRAGMENT,da=oa.HTML,fa=oa.NODE,pa=oa.RICH,va=oa.TEXT,ha=/ data-slate-fragment="([^\s"]+)"/;function ma(e){!bt&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=ya(t,ua),r=ya(t,fa),o=ya(t,da),a=ya(t,pa),i=ya(t,va),l=void 0;if(!n&&o&&~o.indexOf(" "+St.FRAGMENT+'="')){var c=ha.exec(o),s=Kt(c,2),u=(s[0],s[1]);u&&(n=u)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[ua]&&(n=d[ua]),d[fa]&&(r=d[fa]),d[va]&&(i=d[va])}n&&(n=Ho.deserializeNode(n)),r&&(r=Ho.deserializeNode(r));try{t.items&&t.items.length?l=Array.from(t.items).map(function(e){return"file"===e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(l=Array.from(t.files))}catch(e){t.files&&t.files.length&&(l=Array.from(t.files))}var f={files:l,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function ya(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t===va&&e.getData("Text")||null}var ga=oa.TEXT;function ba(e,t,n){var r=oa[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(ga),l={};if(i.substring(0,a.length)===a)try{l=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else l[ga]=i;l[r]=n;var c=""+a+JSON.stringify(l);o.setData(ga,c)}}var wa=q("slate:after");var ka=q("slate:before");function Ca(){var e,t,n,r,o,a,i,l=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,c=void 0===l?[]:l,s=(e=null,t=0,n=!1,r=!1,o=!1,{onBeforeInput:function(e,t,n){var r=!!e.nativeEvent;t.readOnly||r&&Tt||(ka("onBeforeInput",{event:e}),n())},onBlur:function(t,n,o){if(!r&&!n.readOnly){var a=t.relatedTarget,i=t.target,l=ie(i);if(e!==l.document.activeElement){if(a){var c=n.findDOMNode([]);if(a===c)return;if(a.hasAttribute(St.SPACER))return;var s=n.findNode(a);if(c.contains(a)&&s&&!n.isVoid(s))return}ka("onBlur",{event:t}),o()}}},onClick:function(e,t,n){ka("onClick",{event:e}),n()},onCompositionEnd:function(e,r,o){var a=t;window.requestAnimationFrame(function(){t>a||(n=!1)}),ka("onCompositionEnd",{event:e}),o()},onCompositionStart:function(e,r,o){n=!0,t++,r.value.selection.isCollapsed||r.delete(),ka("onCompositionStart",{event:e}),o()},onCopy:function(e,t,n){var o=ie(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),ka("onCopy",{event:e}),n()},onCut:function(e,t,n){if(!t.readOnly){var o=ie(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),ka("onCut",{event:e}),n()}},onDragEnd:function(e,t,n){o=!1,ka("onDragEnd",{event:e}),n()},onDragEnter:function(e,t,n){ka("onDragEnter",{event:e}),n()},onDragExit:function(e,t,n){ka("onDragExit",{event:e}),n()},onDragLeave:function(e,t,n){ka("onDragLeave",{event:e}),n()},onDragOver:function(e,t,n){var r=t.findNode(e.target);r&&!t.isVoid(r)||e.preventDefault(),bt&&e.preventDefault(),o||(o=!0,bt||(e.nativeEvent.dataTransfer.dropEffect="move")),ka("onDragOver",{event:e}),n()},onDragStart:function(e,t,n){o=!0,ka("onDragStart",{event:e}),n()},onDrop:function(e,t,n){t.readOnly||(e.preventDefault(),ka("onDrop",{event:e}),n())},onFocus:function(t,n,o){if(!r&&!n.readOnly){var a=n.findDOMNode([]),i=ie(t.target);e=i.document.activeElement,yt&&t.target!==a?a.focus():(ka("onFocus",{event:t}),o())}},onInput:function(e,t,r){n||t.value.selection.isBlurred||(ka("onInput",{event:e}),r())},onKeyDown:function(e,t,r){t.readOnly||(n?Zo.isCompose(e)&&e.preventDefault():(!Ct&&(Zo.isBold(e)||Zo.isDeleteBackward(e)||Zo.isDeleteForward(e)||Zo.isDeleteLineBackward(e)||Zo.isDeleteLineForward(e)||Zo.isDeleteWordBackward(e)||Zo.isDeleteWordForward(e)||Zo.isItalic(e)||Zo.isRedo(e)||Zo.isSplitBlock(e)||Zo.isTransposeCharacter(e)||Zo.isUndo(e))&&e.preventDefault(),ka("onKeyDown",{event:e}),r()))},onPaste:function(e,t,n){t.readOnly||(e.preventDefault(),ka("onPaste",{event:e}),n())},onSelect:function(t,o,a){if(!r&&!n&&!o.readOnly){var i=ie(t.target);e=i.document.activeElement,ka("onSelect",{event:t}),a()}}}),u=(a=null,i=!1,{onBeforeInput:function(e,t,n){var r=t.value;if(e.nativeEvent)return e.preventDefault(),t.insertText(e.data),n();var o=e.getTargetRanges(),a=Kt(o,1)[0];if(!a)return n();wa("onBeforeInput",{event:e}),e.preventDefault();var i=r.document,l=r.selection,c=t.findRange(a);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":t.deleteAtRange(c);break;case"deleteWordBackward":t.deleteWordBackwardAtRange(c);break;case"deleteWordForward":t.deleteWordForwardAtRange(c);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":t.deleteLineBackwardAtRange(c);break;case"deleteSoftLineForward":case"deleteHardLineForward":t.deleteLineForwardAtRange(c);break;case"insertLineBreak":case"insertParagraph":i.hasVoidParent(l.start.path,t)?t.moveToStartOfNextText():t.splitBlockAtRange(c);break;case"insertFromYank":case"insertReplacementText":case"insertText":var s=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==s)break;t.insertTextAtRange(c,s,l.marks),l.marks&&r.document!==t.value.document&&t.select({marks:null})}n()},onBlur:function(e,t,n){wa("onBlur",{event:e}),t.blur(),n()},onClick:function(e,t,n){if(t.readOnly)return n();var r=t.value.document,o=t.findPath(e.target);if(!o)return n();wa("onClick",{event:e});var a=r.getNode(o),i=r.getAncestors(o);a&&(t.isVoid(a)||i.some(function(e){return t.isVoid(e)}))&&t.focus().moveToEndOfNode(a),n()},onCopy:function(e,t,n){wa("onCopy",{event:e}),sa(e,t),n()},onCut:function(e,t,n){wa("onCut",{event:e}),sa(e,t,function(){var e=t.value,n=e.document,r=e.selection,o=r.end,a=void 0;if(r.isCollapsed){var i=!0,l=!1,c=void 0;try{for(var s,u=n.ancestors(o.path)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value,f=Kt(d,2),p=f[0],v=f[1];if(t.isVoid(p)){a=v;break}}}catch(e){l=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw c}}}a?t.removeNodeByKey(a):t.delete()}),n()},onDragEnd:function(e,t,n){wa("onDragEnd",{event:e}),a=null,n()},onDragStart:function(e,t,n){wa("onDragStart",{event:e}),a=!0;var r=t.value,o=r.document,i=t.findPath(e.target),l=o.getNode(i),c=o.getAncestors(i),s=l&&(t.isVoid(l)||c.some(function(e){return t.isVoid(e)})),u=r.blocks.some(function(e){return e===l});s&&!u&&t.moveToRangeOfNode(l);var d=t.value.fragment;ba(e,"fragment",Ho.serializeNode(d)),n()},onDrop:function(e,t,n){var r=t.value,o=r.document,i=r.selection,l=ie(e.target),c=t.findEventRange(e);if(!c)return n();wa("onDrop",{event:e});var s=ma(e),u=s.type,d=s.fragment,f=s.text;if(t.focus(),a&&i.end.offset<c.end.offset&&i.end.path.equals(c.end.path)&&(c=c.moveForward(i.start.path.equals(i.end.path)?0-i.end.offset+i.start.offset:0-i.end.offset)),a&&t.delete(),t.select(c),"text"===u||"html"===u){var p=c.anchor,v=o.hasVoidParent(p.path,t);if(v){for(var h=p.path,m=o.getNode(p.path);v;){var y=o.texts({path:h}),g=Kt(y,1)[0];if(!g)break;var b=Kt(g,2);m=b[0],h=b[1],v=o.hasVoidParent(h,t)}m&&t.moveToStartOfNode(m)}f&&f.split("\n").forEach(function(e,n){n>0&&t.splitBlock(),t.insertText(e)})}"fragment"===u&&t.insertFragment(d);var w=t.findDOMNode(c.focus.path);w&&w.dispatchEvent(new MouseEvent("mouseup",{view:l,bubbles:!0,cancelable:!0})),n()},onFocus:function(e,t,n){wa("onFocus",{event:e}),!i||bt||wt?t.focus():t.deselect().focus(),n()},onInput:function(e,t,n){wa("onInput");var r=ie(e.target).getSelection(),o=t.findSelection(r);o?t.select(o):t.blur();var a=r.anchorNode;t.reconcileDOMNode(a),n()},onKeyDown:function(e,t,n){wa("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=a.start,l=o.hasVoidParent(i.path,t);if(Zo.isSplitBlock(e)&&!Ct)return l?t.moveToStartOfNextText():t.splitBlock();if(Zo.isDeleteBackward(e)&&!Ct)return t.deleteCharBackward();if(Zo.isDeleteForward(e)&&!Ct)return t.deleteCharForward();if(Zo.isDeleteLineBackward(e))return t.deleteLineBackward();if(Zo.isDeleteLineForward(e))return t.deleteLineForward();if(Zo.isDeleteWordBackward(e))return t.deleteWordBackward();if(Zo.isDeleteWordForward(e))return t.deleteWordForward();if(Zo.isRedo(e))return t.redo();if(Zo.isUndo(e))return t.undo();if(Zo.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(Zo.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(Zo.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(Zo.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(Zo.isMoveBackward(e))return e.preventDefault(),a.isCollapsed?t.moveBackward():t.moveToStart();if(Zo.isMoveForward(e))return e.preventDefault(),a.isCollapsed?t.moveForward():t.moveToEnd();if(Zo.isMoveWordBackward(e))return e.preventDefault(),t.moveWordBackward();if(Zo.isMoveWordForward(e))return e.preventDefault(),t.moveWordForward();if(Zo.isExtendBackward(e)){var c=o.getNode(i.path),s=o.texts({path:i.path,direction:"backward"}),u=Kt(s,1)[0],d=!1;if(u){var f=Kt(u,2)[1];d=o.hasVoidParent(f,t)}if(l||d||""===c.text)return e.preventDefault(),t.moveFocusBackward()}if(Zo.isExtendForward(e)){var p=o.getNode(i.path),v=o.texts({path:i.path}),h=Kt(v,1)[0],m=!1;if(h){var y=Kt(h,2)[1];m=o.hasVoidParent(y,t)}if(l||m||""===p.text)return e.preventDefault(),t.moveFocusForward()}n()},onMouseDown:function(e,t,n){wa("onMouseDown",{event:e}),i=!0,n()},onMouseUp:function(e,t,n){wa("onMouseUp",{event:e}),i=!1,n()},onPaste:function(e,t,n){wa("onPaste",{event:e});var r=t.value,o=ma(e),a=o.type,i=o.fragment,l=o.text;if("fragment"===a&&t.insertFragment(i),"text"===a||"html"===a){if(!l)return n();var c=r.document,s=r.selection,u=r.startBlock;if(t.isVoid(u))return n();var d=u,f=c.getInsertMarksAtRange(s),p=ra.deserialize(l,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(p)}n()},onSelect:function(e,t,n){wa("onSelect",{event:e});var r=ie(e.target).getSelection(),o=t.findSelection(r);o?t.select(o):t.blur(),i=!1,n()}}),d=kt?[qo()]:[];return[].concat(d,[s],Ut(c),[u])}function Ea(e){var t=e.nativeEvent||e;switch(t.type){case"keydown":return t.type+" "+JSON.stringify(t.key);case"input":case"beforeinput":case"textInput":return t.type+":"+t.inputType+" "+JSON.stringify(t.data);default:return t.type}}var Oa=q("slate:events");var Ta=2e3,Sa=q("slate:batch-events");function xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.placeholder,n=void 0===t?"":t,o=e.plugins,a=void 0===o?[]:o,i=q.enabled("slate:events")?function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,a=te[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)e[o.value]=function(e,t,n){var r=Ea(e);Oa(r),n()}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}():null,l=q.enabled("slate:batch-events")?function(){var e=null,t=null,n=[];function r(){Sa("\n"+n.join("\n")),n.length=0}function o(o){0===n.length&&(e=new Date);var a=Ea(o),i=new Date;n.push("- "+(i-e)+" - "+a),clearTimeout(t),t=setTimeout(r,Ta)}var a={},i=!0,l=!1,c=void 0;try{for(var s,u=te[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)a[s.value]=function(e,t,n){o(e),n()}}catch(e){l=!0,c=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw c}}return a}():null,c={decorateNode:function(){return[]},renderAnnotation:function(e){var t=e.attributes,n=e.children;return r.createElement("span",t,n)},renderBlock:function(e){var t=e.attributes,n=e.children;return r.createElement("div",qt({},t,{style:{position:"relative"}}),n)},renderDecoration:function(e){var t=e.attributes,n=e.children;return r.createElement("span",t,n)},renderDocument:function(e){return e.children},renderEditor:function(e){return e.children},renderInline:function(e){var t=e.attributes,n=e.children;return r.createElement("span",qt({},t,{style:{position:"relative"}}),n)},renderMark:function(e){var t=e.attributes,n=e.children;return r.createElement("span",t,n)}},s={commands:{reconcileNode:function(e,t){var n=e.value,r=n.document,o=n.selection,a=r.getPath(t.key),i=e.findDOMNode(a),l=r.getClosestBlock(a),c=t.text,s=i.textContent,u=l.nodes.last()===t,d=s.charAt(s.length-1);if(u&&"\n"===d&&(s=s.slice(0,-1)),c!==s){var f=o.moveAnchorTo(a,0).moveFocusTo(a,c.length);f=r.resolveRange(f),e.insertTextAtRange(f,s,t.marks)}},reconcileDOMNode:function(e,t){var n=t.parentElement.closest("[data-key]"),r=e.findNode(n);e.reconcileNode(r)}}},u=kn();return[i,l,Ca({plugins:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wn.reduce(function(t,n){return n in e&&(t[n]=e[n]),t},{})}(e)].concat(Ut(a))}),{commands:{restoreDOM:function(e){e.setState({contentKey:e.state.contentKey+1})}}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=bn++,n={type:"placeholder",data:{key:t}},o=e.placeholder,a=e.when,i=e.style,l=void 0===i?{}:i;return hn("string"==typeof o,"You must pass `SlateReactPlaceholder` an `options.placeholder` string."),hn("string"==typeof a||"function"==typeof a,"You must pass `SlateReactPlaceholder` an `options.when` query."),{decorateNode:function(e,t,r){if(!t.query(a,e))return r();var o=r(),i=e.texts(),l=yn(i,1)[0],c=e.texts({direction:"backward"}),s=yn(c,1)[0],u=yn(l,2),d=u[0],f=u[1],p=yn(s,2),v=p[0],h=p[1],m={anchor:{key:d.key,offset:0,path:f},focus:{key:v.key,offset:v.text.length,path:h},mark:n};return[].concat(gn(o),[m])},renderMark:function(e,n,a){var i=e.children,c=e.mark;if("placeholder"===c.type&&c.data.get("key")===t){var s=mn({pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"},l);return r.createElement("span",null,r.createElement("span",{contentEditable:!1,style:s},o),i)}return a()}}}({placeholder:n,when:function(e,t){return"document"===t.object&&""===t.text&&1===t.nodes.size&&1===Array.from(t.texts()).length}}),c,s,u]}var Da=q("slate:editor"),Ra=function(e){function n(){var e,o,a;jt(this,n);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return o=a=Wt(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),a.state={value:a.props.defaultValue,contentKey:0},a.tmp={mounted:!1,change:null,resolves:0,updates:0,contentRef:r.createRef()},a.resolveController=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,n=void 0,r=[],o=void 0,a=!1,i=function(e,n){return t(e,r[n])};return function(){for(var t=arguments.length,l=Array(t),c=0;c<t;c++)l[c]=arguments[c];return a&&n===this&&l.length===r.length&&l.every(i)?o:(a=!0,n=this,r=l,o=e.apply(this,l))}}(function(){ee(a.tmp.resolves<5||a.tmp.resolves!==a.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),a.tmp.resolves++;var e=xa(qt({},a.props,{value:a.props.value||a.state.value}));a.controller=new t.Editor({plugins:[e],onChange:function(e){a.tmp.mounted?a.handleChange(e):a.tmp.change=e}},{controller:a,construct:!1}),a.controller.run("onConstruct")}),Wt(a,o)}return Vt(n,e),Mt(n,[{key:"componentDidMount",value:function(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.focus(),this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function(){this.tmp.updates++,this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentWillUnmount",value:function(){this.tmp.mounted=!1}},{key:"render",value:function(){var e=this;Da("render",this);var t=this.props,n=t.commands,o=t.placeholder,a=t.plugins,i=t.queries,l=t.schema;this.resolveController(a,l,n,i,o);var c=this.props,s=c.options,u=c.readOnly,d=c.value,f=this.state.value,p=d||f,v=this.state.contentKey;this.controller.setReadOnly(u),this.controller.setValue(p,s);var h=this.props,m=h.autoCorrect,y=h.className,g=h.id,b=h.role,w=h.spellCheck,k=h.tabIndex,C=h.style,E=h.tagName,O=r.createElement(vn,{ref:this.tmp.contentRef,autoCorrect:m,className:y,contentKey:v,editor:this,id:g,onEvent:function(t,n){return e.run(t,n)},readOnly:u,role:b,spellCheck:w,style:C,tabIndex:k,tagName:E});return this.controller.run("renderEditor",qt({},this.props,{editor:this,children:O}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;this.state.value&&this.setState({value:e.value}),t(e)}},{key:"applyOperation",value:function(){var e;return(e=this.controller).applyOperation.apply(e,arguments)}},{key:"command",value:function(){var e;return(e=this.controller).command.apply(e,arguments)}},{key:"hasCommand",value:function(){var e;return(e=this.controller).hasCommand.apply(e,arguments)}},{key:"hasQuery",value:function(){var e;return(e=this.controller).hasQuery.apply(e,arguments)}},{key:"normalize",value:function(){var e;return(e=this.controller).normalize.apply(e,arguments)}},{key:"query",value:function(){var e;return(e=this.controller).query.apply(e,arguments)}},{key:"registerCommand",value:function(){var e;return(e=this.controller).registerCommand.apply(e,arguments)}},{key:"registerQuery",value:function(){var e;return(e=this.controller).registerQuery.apply(e,arguments)}},{key:"run",value:function(){var e;return(e=this.controller).run.apply(e,arguments)}},{key:"withoutNormalizing",value:function(){var e;return(e=this.controller).withoutNormalizing.apply(e,arguments)}},{key:"call",value:function(){var e;return(e=this.controller).call.apply(e,arguments)}},{key:"change",value:function(){var e;return(e=this.controller).change.apply(e,arguments)}},{key:"onChange",value:function(){var e;return(e=this.controller).onChange.apply(e,arguments)}},{key:"applyOperations",value:function(){var e;return(e=this.controller).applyOperations.apply(e,arguments)}},{key:"setOperationFlag",value:function(){var e;return(e=this.controller).setOperationFlag.apply(e,arguments)}},{key:"getFlag",value:function(){var e;return(e=this.controller).getFlag.apply(e,arguments)}},{key:"unsetOperationFlag",value:function(){var e;return(e=this.controller).unsetOperationFlag.apply(e,arguments)}},{key:"withoutNormalization",value:function(){var e;return(e=this.controller).withoutNormalization.apply(e,arguments)}},{key:"operations",get:function(){return this.controller.operations}},{key:"readOnly",get:function(){return this.controller.readOnly}},{key:"value",get:function(){return this.controller.value}},{key:"editor",get:function(){return this.controller.editor}},{key:"schema",get:function(){Z(!1,"As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function(){Z(!1,"As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),n}(r.Component);function Na(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;ee(!1,"As of slate-react@0.22 the `findDOMPoint(point)` helper is deprecated in favor of `editor.findDOMPoint(point)`.");var n=aa(e.key,t),r=0,o=Array.from(n.querySelectorAll(xt.STRING+", "+xt.ZERO_WIDTH)),a=!0,i=!1,l=void 0;try{for(var c,s=o[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,d=u.childNodes[0],f=d.textContent.length,p=f;u.hasAttribute(St.LENGTH)&&(p=parseInt(u.getAttribute(St.LENGTH),10));var v=r+p;if(e.offset<=v)return{node:d,offset:Math.min(f,Math.max(0,e.offset-r))};r=v}}catch(e){i=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw l}}return null}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;ee(!1,"As of slate-react@0.22 the `findDOMRange(range)` helper is deprecated in favor of `editor.findDOMRange(range)`.");var n=e.anchor,r=e.focus,o=e.isBackward,a=e.isCollapsed,i=Na(n,t),l=a?i:Na(r,t);if(!i||!l)return null;var c=t.document.createRange(),s=o?l:i,u=o?i:l;return c.setStart(s.node,s.offset),c.setEnd(u.node,u.offset),c}function Aa(e,n){ee(!1,"As of slate-react@0.22 the `findNode(element)` helper is deprecated in favor of `editor.findNode(element)`."),Z(!t.Value.isValue(n),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var r=e.closest(xt.KEY);if(!r)return null;var o=r.getAttribute(St.KEY);return o&&n.value.document.getNode(o)||null}function Ia(e,t){ee(!1,"As of slate-react@0.22 the `findPath(element)` helper is deprecated in favor of `editor.findPath(element)`.");var n=Aa(e,t);return n?t.value.document.getPath(n):null}function _a(e,n){ee(!1,"As of slate-react@0.22 the `getEventRange(event, editor)` helper is deprecated in favor of `editor.findEventRange(event)`."),Z(!t.Value.isValue(n),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`."),e.nativeEvent&&(e=e.nativeEvent);var r=e,o=r.clientX,a=r.clientY,i=r.target;if(null==o||null==a)return null;var l=n.value.document,c=Aa(e.target,n);if(!c)return null;var s=l.getNode(c);if(n.isVoid(s)){var u=i.getBoundingClientRect(),d="inline"===s.object?o-u.left<u.left+u.width-o:a-u.top<u.top+u.height-a,f=l.createRange(),p=d?"moveToEndOfNode":"moveToStartOfNode",v=l[d?"previousTexts":"nextTexts"](c);if(v){var h=Kt(v,1)[0];return f[p](h)}return null}var m=ie(i),y=void 0;if(m.document.caretRangeFromPoint)y=m.document.caretRangeFromPoint(o,a);else if(m.document.caretPositionFromPoint){var g=m.document.caretPositionFromPoint(o,a);(y=m.document.createRange()).setStart(g.offsetNode,g.offset),y.setEnd(g.offsetNode,g.offset)}else if(m.document.body.createTextRange){y=m.document.body.createTextRange();try{y.moveToPoint(o,a)}catch(e){return null}}var b=xo(y,n);return b||null}Ra.propTypes=qt({autoCorrect:X.bool,autoFocus:X.bool,className:X.string,defaultValue:W.value,id:X.string,onChange:X.func,options:X.object,placeholder:X.any,plugins:X.array,readOnly:X.bool,role:X.string,schema:X.object,spellCheck:X.bool,style:X.object,tabIndex:X.number,value:W.value},te.reduce(function(e,t){return e[t]=X.func,e},{})),Ra.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},options:{},placeholder:"",plugins:[],readOnly:!1,schema:{},spellCheck:!0};var Ba={Editor:Ra,cloneFragment:sa,findDOMNode:aa,findDOMPoint:Na,findDOMRange:Fa,findNode:Aa,findPath:Ia,findPoint:To,findRange:xo,getEventRange:_a,getEventTransfer:ma,setEventTransfer:ba,ReactPlugin:xa};e.Editor=Ra,e.cloneFragment=sa,e.findDOMNode=aa,e.findDOMPoint=Na,e.findDOMRange=Fa,e.findNode=Aa,e.findPath=Ia,e.findPoint=To,e.findRange=xo,e.getEventRange=_a,e.getEventTransfer=ma,e.setEventTransfer=ba,e.ReactPlugin=xa,e.default=Ba,Object.defineProperty(e,"__esModule",{value:!0})});
